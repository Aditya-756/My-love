<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>For You üíñ ‚Äî Love Diary </title>

  <!-- Google fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#ffccd5; --bg2:#ffd6e0; --accent:#ff5f92; --text:#2b2b2b; --paper:#fffdfd; --shadow:rgba(0,0,0,0.12);
      --spine-w:88px; --card-radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      font-family:'Poppins',sans-serif;
      background:linear-gradient(120deg,var(--bg1),var(--bg2));
      background-size:300% 300%;
      animation:grad 20s linear infinite;
      overflow:auto;
      color:var(--text);
      -webkit-font-smoothing:antialiased
    }
    @keyframes grad{
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }

    .cover {
      position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:2000;
      background:linear-gradient(180deg,rgba(0,0,0,0.15),rgba(255,255,255,0.06));
      backdrop-filter:blur(4px);
      flex-direction:column;padding:20px;text-align:center;
    }
    .cover h1{font-family:'Great Vibes',cursive;color:white;font-size:clamp(2.2rem,6vw,4rem);text-shadow:0 6px 18px rgba(0,0,0,0.18);margin:0}
    .cover p{color:rgba(255,255,255,0.95);margin:12px 0 20px;font-weight:500}
    .btn{padding:10px 18px;border-radius:999px;border:none;background:white;color:var(--accent);font-weight:700;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,0.1)}

    .stage{max-width:1000px;margin:6vh auto;padding-left:calc(var(--spine-w));position:relative;width:calc(100% - 24px)}
    .spine{position:absolute;left:12px;top:0;bottom:0;width:calc(var(--spine-w) - 12px);display:flex;align-items:center;justify-content:center;pointer-events:none}
    .binding{width:44px;height:calc(100% - 8vh);background:linear-gradient(180deg,rgba(255,255,255,0.06),rgba(0,0,0,0.03));border-radius:16px;box-shadow:8px 12px 28px rgba(0,0,0,0.12) inset;padding:8px 0;transform:translateY(3vh)}
    .ring{width:14px;height:8px;border-radius:10px;background:rgba(0,0,0,0.12);margin:6px 0}

    .book{
      position:relative; height:66vh; min-height:360px; perspective:1800px; overflow:visible;
      display:block;
    }

    .page-wrap{position:absolute;inset:0;display:flex;align-items:center;justify-content:center}
    .page{
      width:78%; max-width:740px; height:86%; background:var(--paper); border-radius:var(--card-radius); 
      box-shadow:0 18px 40px var(--shadow); position:absolute; transform-origin:right center; 
      overflow:hidden; display:flex;align-items:center;justify-content:center;padding:28px; 
      backface-visibility:hidden; will-change:transform,box-shadow
    }
    .page .inner{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}
    .page .title{font-family:'Great Vibes',cursive;font-size:clamp(1.6rem,3.8vw,2.8rem);color:var(--accent);text-align:center}
    .page .text{margin-top:12px;font-size:clamp(1rem,1.6vw,1.2rem);text-align:center;line-height:1.5;color:var(--text);max-width:86%}

    .page.back{transform:rotateY(-180deg);}
    .page:after{content:'';position:absolute;right:-8px;top:4%;bottom:4%;width:6px;background:linear-gradient(90deg,rgba(0,0,0,0.04),rgba(255,255,255,0.02));border-radius:0 8px 8px 0}

    .final .title{font-size:clamp(2rem,5vw,3.4rem);color:var(--accent);text-shadow:0 6px 18px rgba(255,95,146,0.12)}
    .final .cta{margin-top:18px}
    .yes-btn{padding:12px 20px;border-radius:12px;border:none;background:var(--accent);color:white;font-weight:700;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,0.1)}

    @media (max-width:820px){.page{width:90%}.stage{padding-left:64px}}
    @media (max-width:520px){.page{height:84%;padding:18px;border-radius:10px}}

    .floating{pointer-events:none;position:fixed;inset:0;z-index:1500}
    .floating .heart, .floating .petal{position:absolute;width:18px;height:18px;transform:rotate(45deg);opacity:0.95}
    .petal{border-radius:50% 50% 50% 0}
    .page[tabindex]:focus{outline:3px solid rgba(255,124,168,0.12);outline-offset:6px}
    .hint{font-size:0.9rem;color:rgba(0,0,0,0.45);text-align:center;margin-top:12px}
  </style>
</head>
<body>

  <!-- Cover intro -->
  <div class="cover" id="cover" role="dialog" aria-modal="true">
    <h1>For You ‚ù§Ô∏è</h1>
    <p>Open the diary and turn the pages ‚Äî every scroll feels like a real page turning.</p>
    <div>
      <button class="btn" id="openBtn">Open the Notebook</button>
    </div>
    <div class="hint">Tip: Use mouse wheel / two-finger scroll or swipe on mobile</div>
  </div>

  <div class="stage" id="stage" aria-live="polite">
    <div class="spine" aria-hidden="true">
      <div class="binding" role="presentation" aria-hidden="true">
        <div class="ring"></div>
        <div class="ring"></div>
        <div class="ring"></div>
      </div>
    </div>

    <div class="book" id="book">
      <div class="page-wrap" id="pageWrap"></div>
    </div>
  </div>

  <div class="floating" id="floating"></div>

  <!-- GSAP CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <script>
    const pagesData = [
      {title: 'üíå', text: 'Every love story is beautiful ‚Äî but ours is my favorite.'},
      {title: 'üå∏', text: 'You make my mornings brighter and my nights softer.'},
      {title: 'üí´', text: 'My heart races for you, every single time.'},
      {title: 'üíû', text: 'With you, my life blooms like eternal spring.'},
      {title: 'üåπ', text: 'Falling for you felt like flying ‚Äî and I never want to land.'},
      {title: 'üíñ', text: 'You chose me by being you ‚Äî and that\'s everything.'},
      {title: '‚ú®', text: 'Every moment with you feels a little magical.'},
      {title: 'üíï', text: 'You are my reality, better than any dream.'},
      {title: 'üå∑', text: 'Your smile is my favorite view ‚Äî I could look forever.'},
      {title: 'üíç Will you be mine forever?', text: 'Say yes ‚Äî let\'s write the rest of our story together.', final:true}
    ];

    const pageWrap = document.getElementById('pageWrap');
    pagesData.forEach((p,i) => {
      const el = document.createElement('article');
      el.className = 'page' + (p.final? ' final':'' );
      el.dataset.index = i;
      el.innerHTML = `
        <div class="inner">
          <div class="title">${p.title}</div>
          <div class="text">${p.text}</div>
          ${p.final ? '<div class="cta"><button class="yes-btn" id="yesBtn">Yes, Forever üíï</button></div>' : ''}
        </div>
      `;
      el.style.zIndex = (100 - i);
      pageWrap.appendChild(el);
    });

    const floating = document.getElementById('floating');
    function makeFloating(kind){
      const el = document.createElement('div');
      el.className = kind;
      const left = 8 + Math.random()*84;
      el.style.left = left + 'vw';
      el.style.top = (40 + Math.random()*40) + 'vh';
      if(kind === 'heart'){
        el.style.width = el.style.height = (12 + Math.random()*18) + 'px';
        el.style.background = 'rgba(255,255,255,0.85)';
      } else {
        el.style.width = el.style.height = (10 + Math.random()*20) + 'px';
        el.style.background = ['#ffb6c1','#ffc0cb','#ff69b4','#ff7f7f'][Math.floor(Math.random()*4)];
        el.style.borderRadius = '50% 50% 50% 0';
        el.style.transform = 'rotate(45deg)';
      }
      floating.appendChild(el);
      gsap.to(el, {y: '-=60vh', opacity:0, rotation:360, duration: 4+Math.random()*3, ease:'power1.out', onComplete: () => el.remove()});
    }

    setInterval(() => { makeFloating('petal'); }, 420);
    setInterval(() => { if(Math.random()>.6) makeFloating('heart'); }, 600);

    gsap.registerPlugin(ScrollTrigger);
    const pages = Array.from(document.querySelectorAll('.page'));
    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: '#stage',
        start: 'top top',
        end: () => `+=${pages.length * innerHeight * 0.9}`,
        scrub: 0.6,
        pin: true,
        anticipatePin: 1
      }
    });

    pages.forEach((page, idx) => {
      const dur = 0.9;
      tl.to(page, {rotationY: -180, transformOrigin: 'right center', duration: dur, ease: 'power2.inOut', boxShadow: '0 4px 18px rgba(0,0,0,0.06)'}, idx * 0.65);
      tl.set(page, {pointerEvents: 'none'}, (idx * 0.65) + 0.1);
    });

    gsap.from(pages, {y:40, opacity:0, duration:0.8, stagger:0.06, ease:'power2.out'});

    document.getElementById('openBtn').addEventListener('click', () => {
      const cover = document.getElementById('cover');
      gsap.to(cover, {autoAlpha:0, duration:0.6, onComplete: () => cover.remove()});
      setTimeout(()=> window.scrollTo({top:1,behavior:'smooth'}), 120);
    });

    document.addEventListener('click', (e) => {
      if(e.target && e.target.id === 'yesBtn'){
        for(let i=0;i<28;i++){ makeFloating(Math.random()>0.5?'heart':'petal'); }
        e.target.textContent = 'Yesss! üíï';
        e.target.disabled = true;
        e.target.style.transform = 'scale(0.98)';

        const msg = document.createElement('div');
        msg.style.position='fixed';
        msg.style.inset='0';
        msg.style.display='flex';
        msg.style.alignItems='center';
        msg.style.justifyContent='center';
        msg.style.zIndex='2200';
        msg.style.background='radial-gradient(circle at 30% 10%, rgba(255,255,255,0.12), rgba(0,0,0,0.36))';

        msg.innerHTML = `
          <div style="text-align:center;max-width:90%;padding:24px;border-radius:18px;
            background:linear-gradient(180deg,rgba(255,255,255,0.06),rgba(0,0,0,0.12));
            backdrop-filter:blur(6px);">
            <div style="font-family:'Great Vibes',cursive;color:#fff;
              font-size:clamp(1.8rem,5vw,3rem);
              text-shadow:0 6px 18px rgba(0,0,0,0.25);">
              I love you, always ‚ù§Ô∏è
            </div>
            <div style="margin-top:8px;color:rgba(255,255,255,0.95);font-weight:600;">
              We're writing our forever.
            </div>
          </div>
        `;

        document.body.appendChild(msg);
        gsap.from(msg.firstElementChild, {scale:0.7, autoAlpha:0, duration:0.6, ease:'back.out(1.4)'});
        gsap.to(msg, {autoAlpha:0, duration:1.2, delay:5, onComplete:()=>msg.remove()});
      }
    });

    document.addEventListener('keydown', (e) => {
      if(['ArrowDown','PageDown'].includes(e.key)) window.scrollBy({top: innerHeight * 0.65, behavior:'smooth'});
      if(['ArrowUp','PageUp'].includes(e.key)) window.scrollBy({top: -innerHeight * 0.65, behavior:'smooth'});
    });

    pages.forEach(p => {
      p.addEventListener('click', (ev) => {
        if(window.innerWidth < 700){
          const currently = gsap.getProperty(p, 'rotationY') || 0;
          if(Math.abs(currently) < 20) gsap.to(p, {rotationY:-180, duration:0.6, ease:'power2.out'});
          else gsap.to(p, {rotationY:0, duration:0.6, ease:'power2.out'});
        }
      });
    });

    window.addEventListener('resize', () => { ScrollTrigger.refresh(); });
  </script>
</body>
</html>

